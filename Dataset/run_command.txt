# Dataset generation
Dataset\.venv310\Scripts\python Dataset\generate_data.py --dry-run
Dataset\.venv310\Scripts\python Dataset\generate_data.py

# Build real measured dataset from raw lab export
Dataset\.venv310\Scripts\python Phase4_Coherence\build_measurement_dataset.py --raw-csv Dataset\measurement_raw.csv --output-csv Dataset\measurement_dataset.csv --report-json Dataset\measurement_dataset.report.json

# Retrain coherence model with measured data
Dataset\.venv310\Scripts\python Phase4_Coherence\train_phase4_coherence.py --label-mode hybrid --measurement-csv Dataset\measurement_dataset.csv
Dataset\.venv310\Scripts\python Phase4_Coherence\validate_phase4_coherence.py --measurement-csv Dataset\measurement_dataset.csv

# Phase 4.5 public data bootstrap
Dataset\.venv310\Scripts\python -m pip install -r Phase4_5_PublicData\requirements-phase45.txt
Dataset\.venv310\Scripts\python Phase4_5_PublicData\fetch_public_datasets.py --include-large --max-download-mb 350
Dataset\.venv310\Scripts\python Phase4_5_PublicData\build_public_canonical_dataset.py
Dataset\.venv310\Scripts\python Phase4_5_PublicData\augment_large_raw_sources.py --input-csv Dataset\public_sources\silver\public_measurements_canonical.csv --output-csv Dataset\public_sources\silver\public_measurements_canonical.csv
Dataset\.venv310\Scripts\python Phase4_5_PublicData\map_public_to_internal.py --max-distance 1.6 --min-confidence 0.30

# Train/validate Phase 4 with confidence-weighted public bootstrap labels
Dataset\.venv310\Scripts\python Phase4_Coherence\train_phase4_coherence.py --label-mode hybrid --measurement-csv Dataset\measurement_dataset_public_bootstrap.csv --measured-weight 3.0 --proxy-weight 1.0
Dataset\.venv310\Scripts\python Phase4_Coherence\validate_phase4_coherence.py --measurement-csv Dataset\measurement_dataset_public_bootstrap.csv

# Phase 4.6 trace-fit augmentation (Zenodo 8004359)
Dataset\.venv310\Scripts\python Phase4_6_TraceCoherence\augment_with_zenodo_8004359_traces.py
Dataset\.venv310\Scripts\python Phase4_5_PublicData\map_public_to_internal.py --public-csv Dataset\public_sources\silver\public_measurements_canonical_augmented.csv --max-distance 1.6 --min-confidence 0.30

# Conservative retrain with augmented bootstrap labels
Dataset\.venv310\Scripts\python Phase4_Coherence\train_phase4_coherence.py --label-mode hybrid --measurement-csv Dataset\measurement_dataset_public_bootstrap.csv --measured-weight 1.0 --proxy-weight 1.0
Dataset\.venv310\Scripts\python Phase4_Coherence\validate_phase4_coherence.py --measurement-csv Dataset\measurement_dataset_public_bootstrap.csv

# One-command Phase 4.6 pipeline
Dataset\.venv310\Scripts\python Phase4_6_TraceCoherence\run_phase46_pipeline.py

# Phase 5 closed-loop candidate engine
Dataset\.venv310\Scripts\python -m pip install -r Phase5_ClosedLoop\requirements-phase5.txt
Dataset\.venv310\Scripts\python Phase5_ClosedLoop\run_phase5_closed_loop.py
Dataset\.venv310\Scripts\python Phase5_ClosedLoop\run_phase5_closed_loop.py --targets-csv Phase5_ClosedLoop\targets.template.csv

# Phase 5.1 fabrication handoff export
Dataset\.venv310\Scripts\python Phase5_ClosedLoop\export_fab_handoff.py





# Phase 6: reliability ablations + stress tests (paper-ready artifacts)
Dataset\.venv310\Scripts\python Phase6_Reliability\run_phase6_reliability.py

# Phase 6: quick run (Phase 4 reliability only; skip Phase 5 stress)
Dataset\.venv310\Scripts\python Phase6_Reliability\run_phase6_reliability.py --skip-phase5
# Phase 7: evidence hardening (multi-seed + source holdout + paper tables)
Dataset\.venv310\Scripts\python Phase7_Evidence\run_phase7_evidence.py

# Phase 7: web interface (non-CLI)
Dataset\.venv310\Scripts\python -m pip install -r Phase7_Evidence\requirements-phase7.txt
$env:PYTHONUTF8='1'
Dataset\.venv310\Scripts\python -m streamlit run Phase7_Evidence\webapp\app.py

# Phase 7: publication figure pack (from large sweep)
Dataset\.venv310\Scripts\python Phase7_Evidence\generate_publication_figures.py --input-dir Phase7_Evidence\artifacts_large_sweep --output-dir Phase7_Evidence\artifacts_large_sweep\figures

# Final paper rerun (strict physics + larger evidence sweep)
Dataset\.venv310\Scripts\python Dataset\generate_data.py --workdir Dataset --sampling-mode random --geometry-samples 1200 --junction-samples 10 --target-single-rows 10000 --max-pairs 5000 --gmsh-verbosity 0 --mesh-lc-min-um 30 --mesh-lc-max-um 120 --mesh-optimize-threshold 0.45 --no-palace-fallback
Dataset\.venv310\Scripts\python Phase4_5_PublicData\build_public_canonical_dataset.py
Dataset\.venv310\Scripts\python Phase4_5_PublicData\augment_large_raw_sources.py --input-csv Dataset\public_sources\silver\public_measurements_canonical.csv --output-csv Dataset\public_sources\silver\public_measurements_canonical.csv
Dataset\.venv310\Scripts\python Phase4_5_PublicData\map_public_to_internal.py --max-distance 1.6 --min-confidence 0.30
Dataset\.venv310\Scripts\python Phase1_Surrogate\train_surrogate.py --n-estimators 250 --max-depth 32
Dataset\.venv310\Scripts\python Phase2_Embedding\train_phase2_embedding_nn.py
Dataset\.venv310\Scripts\python Phase2_Embedding\validate_phase2_embedding_nn.py
Dataset\.venv310\Scripts\python Phase3_InverseDesign\validate_phase3.py --max-queries-per-split 40
Dataset\.venv310\Scripts\python Phase4_Coherence\train_phase4_coherence.py --label-mode hybrid --measurement-csv Dataset\measurement_dataset_public_bootstrap.csv --measured-weight 1.0 --proxy-weight 1.0
Dataset\.venv310\Scripts\python Phase4_Coherence\validate_phase4_coherence.py --measurement-csv Dataset\measurement_dataset_public_bootstrap.csv
Dataset\.venv310\Scripts\python Phase5_ClosedLoop\run_phase5_closed_loop.py
Dataset\.venv310\Scripts\python Phase6_Reliability\run_phase6_reliability.py
Dataset\.venv310\Scripts\python Phase7_Evidence\run_phase7_evidence.py --measurement-csv Dataset\measurement_dataset_public_bootstrap.csv --output-dir Phase7_Evidence\artifacts_large_sweep --seeds 42,123,777,1001,1002,1003,1004,1005,1006,1007
Dataset\.venv310\Scripts\python Phase7_Evidence\generate_publication_figures.py --input-dir Phase7_Evidence\artifacts_large_sweep --output-dir Phase7_Evidence\artifacts_large_sweep\figures
Dataset\.venv310\Scripts\python Phase7_Evidence\generate_extended_publication_figures.py --phase7-dir Phase7_Evidence\artifacts_large_sweep --phase6-dir Phase6_Reliability\artifacts --phase5-dir Phase5_ClosedLoop\artifacts --single-csv Dataset\final_dataset_single.csv --output-dir Phase7_Evidence\artifacts_large_sweep\figures
